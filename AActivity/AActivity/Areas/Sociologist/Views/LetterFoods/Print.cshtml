@model AActivity.Areas.Sociologist.ModelViews.PrintTripFoodView

@{
    ViewData["Title"] = "طباعة";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@functions{
    string signutreRoleName(string role)
    {
        foreach (var sr in Model.Signatures)
        {
            if (sr.SignatureRole == role)
            {
                return $"{sr.Degree}  {sr.User.FullName}";
            }
        }
        return string.Empty;

    }
}

<style>
    .lead {
    font-size: 1rem;
    font-weight: 200;

}
    .fa-2x {
    font-size: 1em;
}
</style>
<button id="print" class="btn btn-outline-gold"><i class="fa fa-print fa-3x"></i></button>
<hr />
<div class="row">
    <div class="col-12">
        <table id="table"  class="ar tbPrint">
            <tr>
                <th colspan="4">
                    <img src="~/img/letter/letterHeade.PNG" class="w-100 h-50" />
                </th>

            </tr>
            <tr class="text-center">
                <th class="pt-4" colspan="4">
                    <h5> نموذج طلب تأمين تغذية لفعاليات النشاط الاجتماعي</h5>
                </th>
            </tr>

            <tbody class="table table-bordered ">
                <tr class="text-center">
                    <th colspan="4" class="p-3">
                        <span class="mr-5">
                            الجهة التعليمية  / @Model.EducationBody
                        </span>
                        <span class="mr-5">
                            عدد الطلاب / <span>@Model.QtyStudents</span> طالب
                        </span>
                        <span>
                            التاريخ / @Model.TripDate.ToString("dd-MM-yyyy")
                        </span>
                    </th>

                </tr>
                <tr class="text-center">
                    <td class="font-weight-bold  w-25">
                        @if (Model.TripType == "عمرة")
                        {

                            <i class="far fa-check-circle text-success fa-2x"></i>

                        }

                        رحلة عمرة
                    </td>
                    <td class="font-weight-bold  w-25">
                        @if (Model.TripType == "داخلية")
                        {
                            <span class="badge badge-pill p-2 ">
                                <i class="far fa-check-circle text-success fa-2x"></i>
                            </span>
                        }
                        رحلة داخلية
                    </td>
                    <th class=" w-25">
                        @if (Model.TripType == "خارجية")
                        {
                            <span class="badge badge-pill p-2 ">
                                <i class="far fa-check-circle text-success fa-2x"></i>
                            </span>
                        }
                        رحلة خارجية


                    </th>
                    <th class="  w-25">
                        @if (Model.TripType == "زيارة")
                        {
                            <span class="badge badge-pill p-2 fa-2x">
                                <i class="far fa-check-circle text-success "></i>
                            </span>
                        }
                        زيارة
                    </th>
                </tr>
                <tr class="text-center">
                    <th colspan="4">
                        <span class="ml-5">
                            عدد الوجبات / @Model.QtyMeals
                        </span>
                        <span>
                            موعد اول وجبة /  @Model.FirstMealTime
                            @Model.FirstMealDate.ToString("dd/MM")
                        </span>
                        <span class="ml-5">
                            موعد آخر وجبة /  @Model.LastMealTime
                            @Model.LastMealDate.ToString("dd/MM")
                        </span>
                    </th>
                </tr>
                <tr class="text-center">
                    <th colspan="4" class="p-3">
                        <span class="ml-5">
                            اسم مشرف الجهة التعليمية /  @Model.EducationBodySupervisor
                        </span>
                        <span class="mr-5">
                            رقم الجوال /  @Model.EducationBodySupervisorMobile
                        </span>
                    </th>

                </tr>
            </tbody>
            @await Html.PartialAsync("Signutered/_Siged1.cshtml", Model)
            @await Html.PartialAsync("Signutered/_Siged2.cshtml", Model)
            @await Html.PartialAsync("Signutered/_Siged3.cshtml", Model)
            @await Html.PartialAsync("Signutered/_Siged4.cshtml", Model)
            @await Html.PartialAsync("Signutered/_Siged5.cshtml", Model)

        </table>
        @await Html.PartialAsync("_Students.cshtml", Model)

    </div>
</div>




@section Scripts{
    <script src="~/lib/printThis/printThis.js"></script>

    <script>
        $('#print').click(function () {
            $('.clorSuccess').addClass(" text-success")
            $(".tbPrint").printThis({
                debug: false,               // show the iframe for debugging
                importCSS: true,            // import parent page css
                importStyle: true,         // import style tags
                printContainer: true,       // print outer container/$.selector
                loadCSS: "",                // path to additional css file - use an array [] for multiple
                pageTitle: "",              // add title to print page
                removeInline: false,        // remove inline styles from print elements
                removeInlineSelector: "*",  // custom selectors to filter inline styles. removeInline must be true
                printDelay: 333,            // variable print delay
                header: null,               // prefix to html
                footer: null,               // postfix to html
                base: false,                // preserve the BASE tag or accept a string for the URL
                formValues: true,           // preserve input/form values
                canvas: false,              // copy canvas content
                doctypeString: '...',       // enter a different doctype for older markup
                removeScripts: false,       // remove script tags from print content
                copyTagClasses: false,      // copy classes from the html & body tag
                beforePrintEvent: null,     // function for printEvent in iframe
                beforePrint: null,          // function called before iframe is filled
                afterPrint: null            // function called before iframe is removed
            });

        });


    </script>
}
